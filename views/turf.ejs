<link rel="stylesheet" type="text/css" href="../css/turf.css">

<div id="turf-container">
    <div id="turf-images-container">
        <img src="/images/turf-main-abc.jpg" alt="abc-turf">
    </div>
    <div id="turf-details-container">
        <div id="turf-data-container">
            <h2 class="mt-3">
                <a href="<%= turf.location %>" target="_blank">
                    <i class="fa-solid fa-location-dot"></i>
                    <%=turf.name%>
                </a>
            </h2>
            <p>
                <a class="d-block"> <strong>Address: </strong>
                    <%= turf.address%>
                </a>
                <a class="d-block"> <strong>Contact No: </strong>
                    <%= turf.number%>
                </a>
            </p>
            <div>
                <button id="book-link" class="btn btn-primary mt-3">Book Here</button>
            </div>
            <br>
            <p>
                <strong>
                    Pricing:
                </strong>
                Rs.<%=turf.price%>/-
            </p>

            <form action="/turf/create-booking" method="post" id="booking-form" style="display: none;">
                <div class="form-group" id="form-date-input">
                    <label for="date">Select Date</label>
                    <input type="date" name="date"  class="form-control">
                </div>
                <div class="form-group">
                    <label for="startTime">Start Time</label>
                    <div class="btn-group btn-group-toggle" data-toggle="buttons">
                        <% for (var i=6; i <=11; i++) { %>
                            <label class="btn btn-secondary">
                                <input type="radio" name="startTime" value="<%= i %>:00 AM">
                                <%= i %>:00 AM
                            </label>
                            <% } %>
                                <label class="btn btn-secondary">
                                    <input type="radio" name="startTime" value="11:00 AM">
                                    12:00 PM
                                </label>
                                <% for (var i=1; i <=10; i++) { %>
                                    <label class="btn btn-secondary">
                                        <input type="radio" name="startTime" value="<%= i %>:00 PM">
                                        <%= i %>:00 PM
                                    </label>
                                    <% } %>
                    </div>
                </div>
                <div class="form-group">
                    <label for="endTime">End Time</label>
                    <div class="btn-group btn-group-toggle" data-toggle="buttons">
                        <% for (var i=7; i <=11; i++) { %>
                            <label class="btn btn-secondary">
                                <input type="radio" name="endTime" value="<%= i %>:00 AM">
                                <%= i %>:00 AM
                            </label>
                            <% } %>
                                <label class="btn btn-secondary">
                                    <input type="radio" name="endTime" value="11:00 AM">
                                    12:00 PM
                                </label>
                                <% for (var i=1; i <=11; i++) { %>
                                    <label class="btn btn-secondary">
                                        <input type="radio" name="endTime" value="<%= i %>:00 PM">
                                        <%= i %>:00 PM
                                    </label>
                                    <% } %>
                    </div>
                </div>
                <input type="hidden" name="turf" value="<%=turf._id%>">
                <input type="submit" value="Confirm Booking" class="btn btn-primary mt-3">
            </form>
            <div id="bookings-container" class="mt-3">
                <div id="select-date-form">
                    <h5>Select Date to check available bookings:</h5>
                    <form id="date-form">
                        <input type="date" id="select-date-input" name="selectedDate" onchange="submitDateForm()"
                            value="<%= selectedDate %>" class="form-control">
                    </form>
                </div>
                <% if (bookings.length> 0) { %>
                    <h5>Bookings for <%= selectedDate %> :</h5>
                    <ul>
                        <% bookings.forEach(booking=> { %>
                            <li>
                                <div id="booking-timeslot">
                                    <%= booking.startTime %> to <%= booking.endTime %>
                                </div>
                            </li>
                            <% }); %>
                    </ul>
                    <% } else { %>
                        <p>No bookings found for <%= selectedDate %> .</p>
                        <% } %>

            </div>
        </div>
    </div>
</div>
<!-- <script>
    $(document).ready(function() {
      $("#form-date-input").datepicker();
    });
  </script> -->

<script>
    $("#datepicker").datepicker({
    onSelect: function() { 
        var dateObject = $(this).datepicker('getDate'); 
    }
});
</script>
  
<script src="../js/turf.js"></script>